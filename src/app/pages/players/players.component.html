<div class="player-container">
  <div class="player-card add-card" (click)="openAddPlayerModal()">
    <div class="plus-icon">＋</div>
    <p>Játékos hozzáadása</p>
  </div>

  @for (player of players; track $index) {
    <div class="player-card" (click)="openPlayerModal(player)">
      <div class="player-header">
        <h3>
          {{ player.name }}
          <span class="cap-number">#{{ player.capNumber }}</span>
        </h3>
      </div>
      <img [src]="player.imageUrl" alt="{{ player.name }}" class="player-img" />
      <p class="info-link">Több információért kattints!</p>
    </div>
  }
</div>


@if (selectedPlayer) {
  <div class="player-modal" (click)="closePlayerModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <button class="close-btn" (click)="closePlayerModal()">×</button>
      <h2>{{ selectedPlayer.name }}</h2>
      <p><strong>Szám:</strong> #{{ selectedPlayer.capNumber }}</p>
      <img [src]="selectedPlayer.imageUrl" alt="{{ selectedPlayer.name }}" class="player-modal-img" />
      <p><strong>Bio:</strong> {{ selectedPlayer.bio }}</p>
    </div>
  </div>
}


@if (showAddPlayerForm) {
  <div class="player-modal" (click)="closeAddPlayerModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <button class="close-btn" (click)="closeAddPlayerModal()">×</button>
      <h2>Új játékos hozzáadása</h2>

      <form [formGroup]="addPlayerForm" (ngSubmit)="submitNewPlayer()" class="add-player-form">
        <mat-form-field appearance="fill">
          <mat-label>Név</mat-label>
          <input matInput formControlName="name" required />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Sapkaszám</mat-label>
          <input matInput type="number" formControlName="capNumber" required />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Leírás</mat-label>
          <textarea matInput formControlName="bio"></textarea>
        </mat-form-field>

        <button mat-raised-button color="primary" type="submit" [disabled]="addPlayerForm.invalid">
          Hozzáadás
        </button>
      </form>
    </div>
  </div>
}
